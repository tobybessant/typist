(function(t){function e(e){for(var n,r,o=e[0],c=e[1],l=e[2],d=0,h=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&h.push(i[r][0]),i[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(h.length)h.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],n=!0,o=1;o<s.length;o++){var c=s[o];0!==i[c]&&(n=!1)}n&&(a.splice(e--,1),t=r(r.s=s[0]))}return t}var n={},i={app:0},a=[];function r(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=n,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(s,n,function(e){return t[e]}.bind(null,n));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var n=s("85ec"),i=s.n(n);i.a},"0405":function(t,e,s){},1:function(t,e){},"197e":function(t,e,s){"use strict";var n=s("ffe4"),i=s.n(n);i.a},"1af3":function(t,e,s){},"1dfe":function(t,e,s){},2889:function(t,e,s){"use strict";var n=s("c3c6"),i=s.n(n);i.a},"2ae4":function(t,e,s){},3511:function(t,e,s){"use strict";var n=s("2ae4"),i=s.n(n);i.a},"3f10":function(t,e,s){"use strict";var n=s("cefc"),i=s.n(n);i.a},"491a":function(t,e,s){},"521d":function(t,e,s){},"53a2":function(t,e,s){"use strict";var n=s("0405"),i=s.n(n);i.a},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},a=[],r=(s("034f"),s("2877")),o={},c=Object(r["a"])(o,i,a,!1,null,null,null),l=c.exports,u=s("8c4f"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("AppHeading"),t._m(0),s("div",{staticClass:"buttons"},[s("Button",{attrs:{label:"New Game"},on:{buttonClick:t.newGameClicked}}),s("Button",{attrs:{label:"Join Game"},on:{buttonClick:t.joinGameClicked}}),s("Button",{attrs:{label:"Highscores"},on:{buttonClick:t.highscoresClicked}})],1)],1)},h=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",[t._v(" Type against your friends."),s("br"),s("br"),t._v("Click "),s("strong",[t._v("New Game")]),t._v(" to begin, or join your friends by clicking "),s("strong",[t._v("Join Game")])])}],p=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},f=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h1",[t._v("Typist"),s("span",{staticClass:"blinking-caret"},[t._v("|")])])}],m={name:"AppHeading"},b=m,v=(s("b3fc"),Object(r["a"])(b,p,f,!1,null,"79bcd1c7",null)),y=v.exports,g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("button",{style:t.css,on:{click:t.emitClickedEvent}},[t._v(" "+t._s(t.label)+" ")])])},_=[],C={name:"Button",props:{label:String,handler:null,css:{}},methods:{emitClickedEvent:function(){this.$emit("buttonClick")}}},w=C,k=(s("c334"),Object(r["a"])(w,g,_,!1,null,"6717c66b",null)),x=k.exports,O={name:"home",components:{AppHeading:y,Button:x},methods:{newGameClicked:function(){this.$router.push({name:"newgame"})},joinGameClicked:function(){this.$router.push({name:"joingame"})},highscoresClicked:function(){this.$router.push({name:"highscores"})}}},S=O,W=(s("9e6a"),Object(r["a"])(S,d,h,!1,null,"2cec6d9c",null)),j=W.exports,E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("h1",[t._v("New Game")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",id:"gameName",placeholder:"Enter Username",autocomplete:"off"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),s("div",{staticClass:"buttons"},[s("Button",{attrs:{label:"Continue"},on:{buttonClick:t.createGame}}),s("Button",{attrs:{label:"Cancel"},on:{buttonClick:t.goHome}})],1)])},R=[],P={name:"NewGame",components:{Button:x},data:function(){return{username:""}},methods:{createGame:function(){this.$router.push({name:"lobby",params:{username:this.username}})},goHome:function(){this.$router.push({name:"home"})}}},T=P,$=(s("ad65"),Object(r["a"])(T,E,R,!1,null,"4cf296a2",null)),L=$.exports,B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("h1",[t._v("Join Game")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.lobbyId,expression:"lobbyId"}],attrs:{type:"text",id:"lobbyId",placeholder:"Enter Lobby Code",autocomplete:"off"},domProps:{value:t.lobbyId},on:{input:function(e){e.target.composing||(t.lobbyId=e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",id:"username",placeholder:"Enter Username",autocomplete:"off"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),s("Button",{attrs:{label:"Join"},on:{buttonClick:t.joinGame}}),s("Button",{attrs:{label:"Cancel"},on:{buttonClick:t.home}})],1)},I=[],A={name:"JoinGame",components:{Button:x},data:function(){return{username:"",lobbyId:""}},methods:{joinGame:function(){this.$router.push({name:"lobby",params:{username:this.username,lobbyId:this.lobbyId}})},home:function(){this.$router.push({name:"home"})}}},G=A,M=(s("88d2"),Object(r["a"])(G,B,I,!1,null,"854de2aa",null)),H=M.exports,D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[t.loading?t._e():s("div",{staticClass:"content"},[t.client&&!t.gameStarted?s("div",{staticClass:"lobby"},[s("div",{staticClass:"lobby-details"},[s("div",{staticClass:"detail"},[s("div",{staticClass:"label"},[t._v("Lobby")]),s("div",{staticClass:"value"},[s("div",{staticClass:"copy-code-container"},[s("div",{staticClass:"lobby-code-container",on:{click:t.copyCodeToClipboard}},[s("input",{ref:"lobbyCode",attrs:{id:"lobby-code",type:"text",readonly:""},domProps:{value:t.lobby.code}}),s("font-awesome-icon",{attrs:{id:"clipboard-icon",icon:["far","clipboard"]}})],1),s("div",{staticClass:"fade-in",style:t.copied},[s("p",{staticClass:"copied-status"},[t._v("Copied to clipboard!")])])])])]),s("div",{staticClass:"detail"},[s("div",{staticClass:"label"},[t._v("Host")]),s("div",{staticClass:"value"},[t._v(t._s(t.lobby.host.username))])])]),s("div",{staticClass:"lobby-buttons"},[s("div",{staticClass:"left-buttons"},[s("Button",{attrs:{label:"Leave Lobby"},on:{buttonClick:t.exitLobby}}),s("Button",{attrs:{label:t.readyButtonText},on:{buttonClick:t.toggleReady}})],1),t.canStartGame&&t.isHost?s("Button",{attrs:{label:"Start",css:{background:"#2bc341",color:"black"}},on:{buttonClick:t.startGame}}):t._e()],1),s("div",{staticClass:"players-heading"},[s("div",{staticClass:"list-title"},[t._v(" Connected Players ")]),t.canStartGame?t._e():s("div",{staticClass:"ready-status"},[t._v(" Waiting for players to ready up... ")])]),s("div",{staticClass:"player-list"}),t._l(t.lobby.players,(function(t){return s("PlayerLobby",{key:t.id,attrs:{player:t}})}))],2):t._e(),t.client?t._e():s("div",{staticClass:"lobby"},[s("h1",[t._v("Error connecting to lobby")])])]),t.loading?s("div",{staticClass:"loading"},[s("Loading",{attrs:{text:"Connecting..."}})],1):t._e()])},F=[],V=(s("4de4"),s("d3b7"),s("96cf"),s("8055")),N=s.n(V),U=(s("a4d3"),s("4160"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),J=s("d4ec"),Y=s("bee2");function q(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function z(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?q(Object(s),!0).forEach((function(e){Object(U["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):q(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var K=function(){function t(e,s,n,i){Object(J["a"])(this,t),this.socket=e,this.router=s,this.details={},this.lobby={code:"",host:"",players:[],gameOver:!1},this.handleEvents(),this.setupLobby(n,i)}return Object(Y["a"])(t,[{key:"handleEvents",value:function(){var t=this,e=this;this.socket.on("STATE_UPDATE",(function(s){return t.updateState(e,s)})),this.socket.on("START",(function(s){return t.gameStarted(e,s)})),this.socket.on("SELF",(function(s){return t.setPlayer(e,s)})),this.socket.on("GAME_OVER",(function(){t.lobby.gameOver=!0}))}},{key:"setPlayer",value:function(t,e){t.details=e}},{key:"updateState",value:function(t,e){t.lobby=z({},e.state)}},{key:"setupLobby",value:function(t,e){e?this.joinLobby(t,e):this.createLobby(t)}},{key:"createLobby",value:function(t){this.socket.emit("CREATE_LOBBY",{username:t})}},{key:"joinLobby",value:function(t,e){this.socket.emit("JOIN_LOBBY",{username:t,lobbyId:e})}},{key:"leaveLobby",value:function(){this.router.push({name:"home"}),this.socket.emit("LEAVE_LOBBY",{playerId:this.details.id,lobbyId:this.lobby.code})}},{key:"toggleReady",value:function(){this.details.isReady=!this.details.isReady,this.stateChange()}},{key:"startGame",value:function(){this.socket.emit("HOST_STARTED_GAME",{lobbyCode:this.lobby.code})}},{key:"gameStarted",value:function(t,e){this.refreshClientStats(),this.router.push({name:"game",params:{client:t,paragraphWords:e.paragraphWords}})}},{key:"returnToLobby",value:function(){this.router.push({name:"lobby",params:{existingClientData:this}})}},{key:"stateChange",value:function(){this.socket.emit("PLAYER_STATE_UPDATE",{lobbyCode:this.lobby.code,player:this.details})}},{key:"finish",value:function(){this.details.finished=!0,this.stateChange()}},{key:"refreshClientStats",value:function(){this.details.isReady=!1,this.details.finished=!1,this.details.wordIndex=0,this.details.correctWordCount=0,this.details.time=-9999999,this.details.displayTime="",this.details.wordAccuracy="",this.details.wpm="",this.stateChange()}}]),t}(),Q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"player",style:t.playerStyle},[s("div",{staticClass:"username"},[s("p",[t._v(t._s(t.player.username))])]),s("div",{staticClass:"ready-status",style:t.readyStatusColour},[s("p",[t._v(t._s(t.readyDisplay))])])])},X=[],Z={name:"Player",props:{player:null},data:function(){return{playerStyle:null}},mounted:function(){this.playerStyle={background:"linear-gradient(297deg, #FFFFFF, ".concat(this.player.colour,")")}},computed:{readyDisplay:function(){return this.player.isReady?"READY":"NOT READY"},readyStatusColour:function(){var t=this.player.isReady?"#65FF24":"#FF0000",e="1px solid ".concat(t),s=this.player.isReady?"#438038":"#6C1414";return{color:t,background:s,border:e}}}},tt=Z,et=(s("2889"),Object(r["a"])(tt,Q,X,!1,null,"10d6d103",null)),st=et.exports,nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._v(t._s(t.text)),s("span",{staticClass:"blinking-caret"},[t._v("|")])])},it=[],at={name:"Loading",props:{text:String}},rt=at,ot=(s("53a2"),Object(r["a"])(rt,nt,it,!1,null,null,null)),ct=ot.exports,lt={name:"Lobby",components:{Button:x,PlayerLobby:st,Loading:ct},props:{username:String,lobbyId:String,existingClientData:null},data:function(){return{client:null,gameStarted:!1,loading:!0,copied:{display:"none"}}},mounted:function(){var t,e=this;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:if(this.existingClientData){s.next=7;break}return s.next=3,regeneratorRuntime.awrap(N()());case 3:t=s.sent,this.username?this.client=new K(t,this.$router,this.username,this.lobbyId):this.loading=!1,s.next=8;break;case 7:this.client=this.existingClientData;case 8:setTimeout((function(){e.loading=!1}),2e3);case 9:case"end":return s.stop()}}),null,this)},methods:{toggleReady:function(){this.client.toggleReady()},startGame:function(){this.client.startGame()},exitLobby:function(){this.client.leaveLobby()},copyCodeToClipboard:function(){this.$refs.lobbyCode.select(),document.execCommand("copy"),this.displayCopiedMessage(),this.$refs.lobbyCode.blur()},displayCopiedMessage:function(){var t=this;this.copied={display:"inherit",color:"green"},setTimeout((function(){t.copied={display:"none"}}),3e3)}},computed:{canStartGame:function(){return this.client.lobby.players.filter((function(t){return t.isReady})).length===this.client.lobby.players.length},readyButtonText:function(){return this.client.details.isReady?"Unready":"Ready"},isHost:function(){return this.client.details.id===this.client.lobby.host.id},lobby:function(){return this.client.lobby}}},ut=lt,dt=(s("197e"),Object(r["a"])(ut,D,F,!1,null,"5f54a76b",null)),ht=dt.exports,pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"game-container"},[t.client?s("div",{staticClass:"game-view"},[0!==t.countdown?s("div",{staticClass:"countdown"},[s("div",[t._v(t._s(t.countdown))])]):t._e(),s("div",{staticClass:"interface"},[t.paragraph&&!t.client.lobby.gameOver?s("div",{staticClass:"paragraph"},[s("div",{staticClass:"stopwatch"},[s("h2",[s("Stopwatch",{ref:"stopwatch"})],1)]),t._l(t.paragraph,(function(e,n){return s("div",{key:n,staticClass:"word",class:[e.class],style:t.isOpponentPosition(n)},[t._v(" "+t._s(e.text)+" ")])}))],2):t._e(),t.client.details.finished?t._e():s("input",{directives:[{name:"model",rawName:"v-model",value:t.currentWord,expression:"currentWord"}],ref:"inputField",attrs:{type:"text",autocomplete:"off"},domProps:{value:t.currentWord},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:t.submitTypedWord(e)},input:function(e){e.target.composing||(t.currentWord=e.target.value)}}}),t.client.details.finished&&!t.client.lobby.gameOver?s("div",[s("h3",[t._v("Waiting for other players.")]),s("PlayerGame",{attrs:{player:t.client.details}})],1):t._e(),t.client.lobby.gameOver?s("div",{staticClass:"leaderboard"},[t._m(0),t._m(1),t._l(t.client.lobby.players,(function(t,e){return s("PlayerGame",{key:t.id,attrs:{player:t,position:e+1}})}))],2):t._e(),t.client.lobby.gameOver?s("div",{staticClass:"end-buttons"},[s("Button",{attrs:{label:"Return to Lobby",css:{width:"300px"}},on:{buttonClick:t.returnToLobby}}),t.savedHighscore?t._e():s("Button",{attrs:{label:"Save Highscore",css:{width:"300px"}},on:{buttonClick:t.postHighscore}}),t.highscoreResultMessage?s("div",[s("h2",[t._v(t._s(t.highscoreResultMessage))])]):t._e()],1):t._e()])]):t._e(),t.client?t._e():s("div",{staticClass:"error"},[s("h1",[t._v("Error connecting to game")])])])},ft=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"table-title"},[s("h2",[t._v("Results")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"scoreboard-headings"},[s("div",{staticClass:"player-names"},[s("div",[t._v("Player")])]),s("div",{staticClass:"player-stats"},[s("div",[t._v("Correct Words")]),s("div",[t._v("Accuracy")]),s("div",[t._v("WPM")]),s("div",[t._v("Time")])])])}],mt=(s("498a"),s("bc3a")),bt=s.n(mt),vt=function(){function t(e){Object(J["a"])(this,t),this.baseUrl="/api/highscore/",this.axios=e}return Object(Y["a"])(t,[{key:"save",value:function(t){var e;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,regeneratorRuntime.awrap(this.axios.post(this.baseUrl+"save",t));case 2:if(e=s.sent,200!==e.status){s.next=7;break}return s.abrupt("return",{message:e.data.message});case 7:return s.abrupt("return",{error:e.data.error});case 8:case"end":return s.stop()}}),null,this)}},{key:"fetchAll",value:function(){var t;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.axios.get(this.baseUrl+"fetchAll"));case 2:return t=e.sent,e.abrupt("return",t.data.results);case 4:case"end":return e.stop()}}),null,this)}}]),t}(),yt=s("c04f"),gt=s.n(yt),_t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"stopwatch"},[s("div",{staticClass:"minutes"},[t._v(t._s(t.displayMinutes))]),s("div",{staticClass:"separator"},[t._v(":")]),s("div",{staticClass:"seconds"},[t._v(t._s(t.displaySeconds))]),s("div",{staticClass:"separator"},[t._v(":")]),s("div",{staticClass:"seconds"},[t._v(t._s(t.displayMilliseconds))])])},Ct=[],wt=(s("99af"),{name:"Stopwatch",data:function(){return{timeout:null,minutes:0,seconds:0,milliseconds:0}},methods:{update:function(){this.timeout=setTimeout(this.tick,1)},tick:function(){this.milliseconds+=5,this.milliseconds>=1e3&&(this.milliseconds=0,this.seconds++,this.seconds>=60&&(this.seconds=0,this.minutes++)),this.update()},start:function(){this.update()},stop:function(){clearTimeout(this.timeout)},getDisplayValue:function(){return"".concat(this.displayMinutes," : ").concat(this.displaySeconds," : ").concat(this.displayMilliseconds)},getScoreValue:function(){var t=60*this.minutes+this.seconds+.001*this.milliseconds;return t}},computed:{displayMilliseconds:function(){return this.milliseconds>9?this.milliseconds>99?this.milliseconds:"0"+this.milliseconds:"00"+this.milliseconds},displaySeconds:function(){return this.seconds>9?this.seconds:"0"+this.seconds},displayMinutes:function(){return this.minutes>9?this.minutes:"0"+this.minutes}}}),kt=wt,xt=(s("3f10"),Object(r["a"])(kt,_t,Ct,!1,null,"f11c9210",null)),Ot=xt.exports,St=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"player",style:t.playerStyle},[s("div",{staticClass:"username"},[s("p",[t._v(t._s(t.position)+" â€¢ "+t._s(t.player.username))])]),s("div",{staticClass:"player-stats"},[s("div",[t._v(t._s(t.player.correctWordCount)+"/"+t._s(t.player.wordIndex))]),s("div",[t._v(t._s(t.player.wordAccuracy))]),s("div",[t._v(t._s(t.player.wpm))]),s("div",[t._v(t._s(t.player.displayTime))])])])},Wt=[],jt=(s("a9e3"),{name:"Player",props:{player:null,position:Number},data:function(){return{playerStyle:null}},mounted:function(){this.playerStyle={background:"linear-gradient(297deg, #FFFFFF, ".concat(this.player.colour,")")}}}),Et=jt,Rt=(s("3511"),Object(r["a"])(Et,St,Wt,!1,null,"59bfa271",null)),Pt=Rt.exports,Tt={name:"Game",props:{client:null,paragraphWords:Array},components:{Stopwatch:Ot,Button:x,PlayerGame:Pt},data:function(){return{wordWorker:null,countdown:3,currentWordIndex:0,currentWord:"",correctWordCount:0,paragraph:[],opponentPositions:[],highscoreService:null,savedHighscore:!1,highscoreResultMessage:""}},mounted:function(){var t=this;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:this.wordWorker=new Worker(gt.a),this.wordWorker.onmessage=function(e){return t.handleWordServiceWorker(e)},this.buildParahgraphView(),this.startCountdown(),this.disableInput();case 5:case"end":return e.stop()}}),null,this)},methods:{buildParahgraphView:function(){for(var t=0;t<this.paragraphWords.length;t++)0!==t?this.paragraph.push({text:this.paragraphWords[t],class:"next"}):this.paragraph.push({text:this.paragraphWords[t],class:"current"})},startCountdown:function(){var t=this;this.countdown>0?setTimeout((function(){t.countdown-=1,t.startCountdown()}),1e3):(this.$refs.inputField.disabled=!1,this.$refs.inputField.focus(),this.$refs.stopwatch.start())},disableInput:function(){this.$refs.inputField.disabled=!0},submitTypedWord:function(){this.wordWorker.postMessage({operation:"PROCESS_WORD",typedValue:this.currentWord.trim(),correctValue:this.paragraph[this.currentWordIndex].text,correctValueIndex:this.currentWordIndex}),this.currentWord="",this.currentWordIndex+1<this.paragraph.length?this.paragraph[++this.currentWordIndex].class="current":(this.currentWordIndex++,this.client.details.correctWordCount=this.correctWordCount,this.client.details.time=this.$refs.stopwatch.getScoreValue(),this.client.details.displayTime=this.$refs.stopwatch.getDisplayValue(),this.client.details.wordAccuracy=this.wordAccuracy,this.client.details.wpm=this.wpm,this.client.finish())},handleWordServiceWorker:function(t){if(t.data.error)console.error(t.data.error);else switch(t.data.operation){case"PROCESS_WORD":this.updateWordView(t.data.result),this.client.details.wordIndex=t.data.result.index+1,this.client.stateChange()}},updateWordView:function(t){this.paragraph[t.index].class=t.class,this.paragraph[t.index].typed=t.typed,"correct"===t.class&&(this.client.details.correctWordCount=++this.correctWordCount)},isOpponentPosition:function(t){for(var e=0;e<this.client.lobby.players.length;e++)if(this.client.lobby.players[e].wordIndex===t&&this.client.lobby.players[e].id!==this.client.details.id)return{background:this.client.lobby.players[e].colour};return""},returnToLobby:function(){this.client.returnToLobby()},postHighscore:function(){var t,e;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return this.highscoreService||(this.highscoreService=new vt(bt.a)),t={username:this.client.details.username,displayTime:this.client.details.displayTime,wpm:this.client.details.wpm,accuracy:this.client.details.wordAccuracy},s.next=4,regeneratorRuntime.awrap(this.highscoreService.save(t));case 4:e=s.sent,e.error?this.highscoreResultMessage=e.error:(this.savedHighscore=!0,this.highscoreResultMessage=e.message);case 6:case"end":return s.stop()}}),null,this)}},computed:{wordAccuracy:function(){return(this.correctWordCount?Math.floor(this.correctWordCount/this.currentWordIndex*100):0)+"%"},wpm:function(){var t=Math.round(this.$refs.stopwatch.getScoreValue()/60*10)/10;return Math.floor(this.correctWordCount/t)}}},$t=Tt,Lt=(s("eb87"),Object(r["a"])($t,pt,ft,!1,null,"60f04579",null)),Bt=Lt.exports,It=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[t._m(0),s("div",{staticClass:"buttons"},[s("Button",{attrs:{label:"Back"},on:{buttonClick:t.goHome}}),s("Button",{attrs:{label:"Refresh"},on:{buttonClick:t.refreshList}})],1),t._m(1),t._l(t.sortedHighscores,(function(t,e){return s("Highscore",{key:t._id,staticClass:"highscore-list",attrs:{highscore:t,position:e+1}})}))],2)},At=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title"},[s("h1",[t._v("Highscores")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"highscore-headings"},[s("div",{staticClass:"position-h"},[t._v("#")]),s("div",{staticClass:"highscore-details-h"},[s("div",{staticClass:"username"},[t._v("Username")]),s("div",{staticClass:"time"},[t._v("Time")]),s("div",{staticClass:"accuracy"},[t._v("Accuracy")]),s("div",{staticClass:"wpm"},[t._v("WPM")])])])}],Gt=(s("4e82"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"highscore"},[s("div",{staticClass:"position"},[t._v(t._s(t.positionDisplay))]),s("div",{staticClass:"highscore-details"},[s("div",{staticClass:"username"},[t._v(t._s(t.highscore.username))]),s("div",{staticClass:"time"},[t._v(t._s(t.highscore.time))]),s("div",{staticClass:"accuracy"},[t._v(t._s(t.highscore.accuracy))]),s("div",{staticClass:"wpm"},[t._v(t._s(t.highscore.wpm))])])])}),Mt=[],Ht={name:"Highscore",props:{position:Number,highscore:null},computed:{positionDisplay:function(){return this.position+"."}}},Dt=Ht,Ft=(s("960f"),Object(r["a"])(Dt,Gt,Mt,!1,null,null,null)),Vt=Ft.exports,Nt={name:"Highscores",components:{Button:x,Highscore:Vt},data:function(){return{scores:[],highscoreService:null}},mounted:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return this.highscoreService=new vt(bt.a),t.next=3,regeneratorRuntime.awrap(this.highscoreService.fetchAll());case 3:this.scores=t.sent;case 4:case"end":return t.stop()}}),null,this)},methods:{goHome:function(){this.$router.push({name:"home"})},refreshList:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.highscoreService.fetchAll());case 2:this.scores=t.sent;case 3:case"end":return t.stop()}}),null,this)}},computed:{sortedHighscores:function(){var t=this.scores;return t.sort((function(t,e){return e.wpm-t.wpm}))}}},Ut=Nt,Jt=(s("6156"),Object(r["a"])(Ut,It,At,!1,null,"5ae982bb",null)),Yt=Jt.exports;n["a"].use(u["a"]);var qt=[{path:"/",name:"home",component:j},{path:"/newgame",name:"newgame",component:L},{path:"/joingame",name:"joingame",component:H},{path:"/lobby",name:"lobby",component:ht,props:!0},{path:"/game",name:"game",component:Bt,props:!0},{path:"/highscores",name:"highscores",component:Yt}],zt=new u["a"]({routes:qt}),Kt=zt,Qt=s("ecee"),Xt=s("ad3d"),Zt=s("b702");Qt["c"].add(Zt["a"]),n["a"].component("font-awesome-icon",Xt["a"]),n["a"].config.productionTip=!1,new n["a"]({router:Kt,render:function(t){return t(l)}}).$mount("#app")},"57d3":function(t,e,s){},6156:function(t,e,s){"use strict";var n=s("57d3"),i=s.n(n);i.a},7151:function(t,e,s){},8499:function(t,e,s){},"85ec":function(t,e,s){},"88d2":function(t,e,s){"use strict";var n=s("1dfe"),i=s.n(n);i.a},9233:function(t,e,s){},"960f":function(t,e,s){"use strict";var n=s("7151"),i=s.n(n);i.a},"9e6a":function(t,e,s){"use strict";var n=s("521d"),i=s.n(n);i.a},ad65:function(t,e,s){"use strict";var n=s("8499"),i=s.n(n);i.a},b3fc:function(t,e,s){"use strict";var n=s("1af3"),i=s.n(n);i.a},c04f:function(t,e,s){s("c975"),s("baa5"),s("0d03"),s("d3b7"),s("25f0"),s("3ca3"),s("ddb0"),s("2b3d");var n=function(){var t=function(t,e,s){var n={};return n.typed=t,n.class=t===e?"correct":"incorrect",n.index=s,n};self.onmessage=function(e){var s={operation:e.data.operation};switch(e.data.operation){case"PROCESS_WORD":var n=e.data;s.result=t(n.typedValue,n.correctValue,n.correctValueIndex);break;default:s.error="Worker operation unrecognised"}self.postMessage(s)}},i=n.toString();i=i.substring(i.indexOf("{")+1,i.lastIndexOf("}"));var a=new Blob([i],{type:"application/javascript"}),r=URL.createObjectURL(a);t.exports=r},c334:function(t,e,s){"use strict";var n=s("9233"),i=s.n(n);i.a},c3c6:function(t,e,s){},cefc:function(t,e,s){},eb87:function(t,e,s){"use strict";var n=s("491a"),i=s.n(n);i.a},ffe4:function(t,e,s){}});
//# sourceMappingURL=app.2d5b5cdc.js.map